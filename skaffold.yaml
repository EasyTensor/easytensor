apiVersion: skaffold/v2beta8
kind: Config
metadata:
  name: easytensor
build:
  artifacts:
  - image: easytensor/tusd
    context: upload
    docker:
      dockerfile: Dockerfile
  - image: easytensor/frontend
    context: frontend
    docker:
      dockerfile: Dockerfile
    sync: 
      infer: ["**/*"]
  - image: easytensor/backend
    context: backend
    docker:
      dockerfile: Dockerfile
deploy:
  kustomize:
    paths:
    - k8s/dev
profiles:
- name: base
  deploy:
    kustomize:
      paths:
      - k8s/base
- name: prod
  deploy:
    kustomize:
      paths:
      - k8s/prod
